/* This file was generated by ODB, object-relational mapping (ORM)
 * compiler for C++.
 */

DROP TABLE IF EXISTS `ProteinNameMap`;

DROP TABLE IF EXISTS `ProtLocToSystemType`;

DROP TABLE IF EXISTS `ProteinToLocalization`;

DROP TABLE IF EXISTS `SystemType`;

DROP TABLE IF EXISTS `InteractionToSystemType`;

DROP TABLE IF EXISTS `Interaction`;

DROP TABLE IF EXISTS `Protein`;

CREATE TABLE `Protein` (
  `id` INT UNSIGNED NOT NULL PRIMARY KEY AUTO_INCREMENT,
  `specieId` INT NOT NULL,
  `proteinName` TEXT NOT NULL,
  `proteinNamingConvention` TEXT NOT NULL)
 ENGINE=InnoDB;

CREATE TABLE `Interaction` (
  `id` INT UNSIGNED NOT NULL PRIMARY KEY AUTO_INCREMENT,
  `actorAId` INT UNSIGNED,
  `actorBId` INT UNSIGNED,
  `sourceDb` TEXT NOT NULL,
  `pubmedId` INT NOT NULL

  /*
  CONSTRAINT `Interaction_actorAId_fk`
    FOREIGN KEY (`actorAId`)
    REFERENCES `Protein` (`id`)
  */

  /*
  CONSTRAINT `Interaction_actorBId_fk`
    FOREIGN KEY (`actorBId`)
    REFERENCES `Protein` (`id`)
  */)
 ENGINE=InnoDB;

CREATE TABLE `InteractionToSystemType` (
  `interactionId` INT UNSIGNED NOT NULL,
  `systemTypeId` INT UNSIGNED NOT NULL,

  CONSTRAINT `InteractionToSystemType_interactionId_fk`
    FOREIGN KEY (`interactionId`)
    REFERENCES `Interaction` (`id`)
    ON DELETE CASCADE)
 ENGINE=InnoDB;

CREATE INDEX `interactionId_i`
  ON `InteractionToSystemType` (`interactionId`);

CREATE TABLE `SystemType` (
  `id` INT UNSIGNED NOT NULL PRIMARY KEY AUTO_INCREMENT,
  `name` TEXT NOT NULL,
  `confidenceType` INT NOT NULL)
 ENGINE=InnoDB;

CREATE TABLE `ProteinToLocalization` (
  `id` INT UNSIGNED NOT NULL PRIMARY KEY AUTO_INCREMENT,
  `proteinId` INT UNSIGNED,
  `localizationId` INT NOT NULL,
  `sourceDb` TEXT NOT NULL,
  `pubmedId` INT NOT NULL

  /*
  CONSTRAINT `ProteinToLocalization_proteinId_fk`
    FOREIGN KEY (`proteinId`)
    REFERENCES `Protein` (`id`)
  */)
 ENGINE=InnoDB;

CREATE TABLE `ProtLocToSystemType` (
  `protLocId` INT UNSIGNED NOT NULL,
  `systemTypeId` INT UNSIGNED NOT NULL,

  CONSTRAINT `ProtLocToSystemType_protLocId_fk`
    FOREIGN KEY (`protLocId`)
    REFERENCES `ProteinToLocalization` (`id`)
    ON DELETE CASCADE

  /*
  CONSTRAINT `ProtLocToSystemType_systemTypeId_fk`
    FOREIGN KEY (`systemTypeId`)
    REFERENCES `SystemType` (`id`)
  */)
 ENGINE=InnoDB;

CREATE INDEX `protLocId_i`
  ON `ProtLocToSystemType` (`protLocId`);

CREATE TABLE `ProteinNameMap` (
  `id` INT UNSIGNED NOT NULL PRIMARY KEY AUTO_INCREMENT,
  `specieId` INT NOT NULL,
  `namingConventionA` TEXT NOT NULL,
  `proteinNameA` TEXT NOT NULL,
  `namingConventionB` TEXT NOT NULL,
  `proteinNameB` TEXT NOT NULL)
 ENGINE=InnoDB;

/*
ALTER TABLE `InteractionToSystemType` ADD
  CONSTRAINT `InteractionToSystemType_systemTypeId_fk`
    FOREIGN KEY (`systemTypeId`)
    REFERENCES `SystemType` (`id`)
*/

